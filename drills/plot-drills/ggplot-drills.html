<html>

<head>
  <title>ggplot2 drills. stat405. had.co.nz</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
  <script type="text/javascript" src="../jquery-1.3.2.min.js"></script>
  <script type="text/javascript" src="interactive.js"></script>
</head>

<body>
<?php include($_SERVER["DOCUMENT_ROOT"] . "/header.html"); ?>
<div id="wrap">

<h1>stat405</h1>
<h2 class="subhead">ggplot2 drills, by Garrett Grolemund</h2>

<p>Recreate the graphs below by building them up layer by layer with ggplot2 commands.</p>

<h2>Airlines data set</h2>

<ol>
  <li><img src = "ggplots/texmap1.png" alt = "graph" width = "450" height = "300">
    
  <p class="hint">Use <pre>
library(maps)
texas &lt;- map_data("state", "texas")
</pre>
to retrieve the coordinates necessary to make a polygon in the shape of Texas.</p>
  <pre class="answer">
texas &lt;- map_data("state", "texas")
texmap &lt;- c(
  geom_polygon(data = texas, colour = "grey70", fill = NA),
  scale_x_continuous("", limits = c(-107, -93)),
  scale_y_continuous("", limits = c(25.9, 37))
)

ggplot(feb13, aes(long, lat)) +
  texmap + 
  geom_point(aes(size = ntot, colour = ndelay / ntot)) + 
  geom_text(aes(label = origin), 
    data = subset(feb13, ndelay >= 100), 
    size = 4, hjust = 1.5) +
  scale_area("total flights", to = c(1, 8)) + 
  scale_colour_gradient("percent delayed")
</pre></li>




  <li><img src = "ggplots/airports2.png" alt = "graph" width = "450" height = "300">
    
  <pre class="answer">
ggplot(feb13, aes(ntot, ncancel)) + 
  geom_point(data = subset(feb13, origin == "IAH"), size = 7,
  colour = alpha("red", 0.5)) +
  geom_point() +
  geom_text(data = subset(feb13, origin == "IAH"), 
  aes(label = origin), hjust = -.5) +
  geom_smooth(method = "lm", se = T) +
  labs(y = "Number of flights cancelled", 
    x = "Total number of flights")
</pre></li>


<h2>Baby names data set</h2>
  <li><p>Include the words that appear on the graph.</p>
  <img src = "ggplots/classnames3.png" alt = "graph" width = "450" height = "300">
    
  <p class="hint">Start by making the following data set <pre>
names &lt;- read.csv("baby-names.csv", header = T, stringsAsFactors = F)

class &lt;- c("Rakesh", "Luis", "Yanli", "Yen-yin", "Sarah", "Delma", "Chandra", 
  "Elizabeth", "Kim-chi", "Amanda", "Thomas", "Caroline", "Da", "Christine", 
  "Debra", "Christopher", "Justin", "Lisa", "Meng", "Emilian","Rachel", "Lu", 
  "Casper", "Jingjing", "Chengyong", "Ruo", "Zhongyu")

class_names &lt;- subset(names, name %in% class)
class_names &lt;- ddply(class_names, c("name", "year"), summarise, 
  percent = sum(percent) / length(percent))
</pre></p>
  <pre class="answer">
ggplot(class_names, aes(year, percent)) +
  geom_area(aes(group = name, fill = name)) +
  geom_text(aes(year, percent, 
    label = "*some names did not appear in the dataset"), 
    data = data.frame(year = 1925, percent = 0.10), size = 4)
</pre></li>



  <li><p>Include the words that appear on the graph.</p>
  <img src = "ggplots/boxplots4.png" alt = "graph" width = "450" height = "300">
    
  <p class="hint">Use the same data set as above</pre></p>
  <p class="hint">Consider using <code>round_any()</code> to make continuous variables discrete.</pre></p>
  <pre class="answer">
ggplot(class_names, aes(year, percent)) +
  geom_boxplot(aes(group = round_any(year, 5, floor))) +
  geom_smooth(se = F, size = 1) +
  geom_text(aes(year, percent, 
    label = "*blue line is a smoothed mean"), colour = "blue",
    data = data.frame(year = 1906, percent = 0.029), size = 4) +
  geom_text(aes(year, percent, 
    label = "Popularity of class names as a group"), 
    data = data.frame(year = 1911, percent = 0.03), size = 4)
</pre></li>


<h2>Diamonds data set</h2>
  <li><p>Create both graphs then comment on the merits of each one compared to the other.</p>
  <img src = "ggplots/diamonds5a.png" alt = "graph" width = "450" height = "300">
  <img src = "ggplots/diamonds5b.png" alt = "graph" width = "450" height = "300">
    
  <pre class="answer">
ggplot(diamonds, aes(clarity)) + 
  geom_bar(aes(fill = cut), position = "dodge")
  
ggplot(diamonds, aes(clarity)) + 
  geom_bar(aes(fill = cut)) +
  facet_grid(cut ~ .)  
</pre></li>



</ol>


</div>

<?php include($_SERVER["DOCUMENT_ROOT"] . "/stat405/footer.html"); ?>
</body>
</html>